---
title: AWS SAM を使って Amazon API Gateway と AWS Lambda で構成された Slack コマンドを作成する
date: 2021-04-18T13:17:28.140Z
template: blog
image: /assets/gatsby.png
tags:
  - React
  - Gatsby
---
# モチベーション

会社のコミュニケーションツールに Slack を利用しているのですが、業務改善や Slack の管理タスク用に自動化を行いたくなりました。誰でも手軽に実行できるインターフェイスが欲しかったことから Slack の Slash command にて実現することを決めました。Slack command が呼び出すエンドポイントを自前で用意する必要があるのですが、自前でサーバーを立てて受け取るのは面倒なので、サーバーレス構成にします。同様の要件を満たす選択肢として Google App Script があるかと思いますが、今回は Amazon API Gateway と AWS Lambda を利用して Slack command 用の API エンドポイントを作成します。

<!-- 困りポイントをもう少し入れたい -->

# 全体構成

<!-- 簡単だがアーキテクチャ図を入れると良さそう -->

本記事で作成する Slack command エンドポイントは以下の機能を提供します。

- AWS SAM を利用した IaC 構成
- Slack からのリクエスト検証
- Lambda のタイムアウトエラー回避
- (おまけ) コマンド
  - 社内単語辞書
  - ユーザーの参加チャンネル一覧

# Slack コマンドにて AWS Lambda が実行されるまで
<!-- 基本的な SAM の設定を見せる -->

# AWS Lambda によるリクエストの検証

# Lambda のタイムアウトエラー回避